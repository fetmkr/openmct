<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EWCS Config</title>
    <script src="../lib/http.js"></script>

</head>
<body>
    <button  id = "iridiumBtn" onclick="iridiumOn()">Iridium On</button>
    <button onclick="iridiumOff()">Iridium Off</button>
    <button onclick="iridiumSend()">Send Iridium Data</button>
    <form name="form1" action="#"> 
        IP Address: <input type='text' name='ipAddress'/>
        Gateway: <input type='text' name='gateway'/>
        <input type="submit" name="submit" value="Submit" 
        onclick="setIPAddress(document.form1.ipAddress,document.form1.gateway)"/>
    </form>





    
</body>
<script>
function iridiumOn() {
    http.get('/api/set/iridium?on=1')
    .then(function(resp){
        console.log(resp.data);
        return resp.data;
    });
}

function iridiumOff() {
    http.get('/api/set/iridium?on=0')
    .then(function(resp){
        console.log(resp.data);
        return resp.data;
    });
}

function iridiumSend() {
    http.get('/api/set/iridium/send')
    .then(function(resp){
        console.log(resp.data);
        return resp.data;
    });
}

function setIPAddress(ipAddress, gateway)
{
    var regEx = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
    if(ipAddress.value.match(regEx) && gateway.value.match(regEx))
    {
        // console.log(ipAddress.value);
        // console.log(gateway.value);
        // set ip address
        http.get(`/api/set/ip?ip=${ipAddress.value}&gateway=${gateway.value}`)
        .then(function(resp){
            console.log(resp.data);
            return resp.data;
        });

        //return true;
    }
    else
    {
        // false
        alert("Please enter a valid ip Address.");
        return false;
    }
}    

</script>
</html>